!function(g){"use strict";etTheme.autoinit.variationGallery=etTheme.variationGallery=function(){var t,i,a,r,e=g(".variations_form"),o=0<g(e).length,n=e.data("product_id"),l=g(".images-wrapper").hasClass("swiper-vertical-images"),s=g(document).find(".quick-view-popup"),m=!!etConfig.woocommerceSettings.variationGalleryKeepVideo,d={reset_image:!1,reset_data:!1,reset_data_count:0,default_gallery:!1},c=(s.length&&(e=s.find(".variations_form")),t=e,i=n,o&&wp.ajax.send("et_get_default_variation_gallery",{data:{product_id:i},success:function(e){g(t).data("et_variation_gallery_default",e),etTheme.global_image_lazy(),etTheme.resizeVideo(),setTimeout(function(){g(window).trigger("resize")},500)},error:function(e){g(t).data("et_variation_gallery_default",[]),etTheme.et_notice("variationGalleryNotAvailable","error"," "+i+".")},complete:function(){d.default_gallery=!0}}),a=e,n=n,o&&wp.ajax.send("et_get_available_variation_images",{data:{product_id:n},success:function(e){g(a).data("et_variation_gallery_variation_images",r),!r||r.length<1?r=g(a).data("et_variation_gallery_default"):u(r)},error:function(e){g(a).data("et_variation_gallery_variation_images",[])}}),e.on("found_variation",function(e,t){var i=g(this),a=i.data("et_variation_gallery_default");a&&void 0!==a?_(i,t):setTimeout(()=>{_(i,t)},1e3)}).on("reset_image",function(e){d.reset_image=!0;let t=g(document).find(".swiper-control-top .main-images .swiper-slide").first().find("a");setTimeout(function(){t.parent().find("img.zoomImg").attr("src",t.attr("href")),t.find("img").attr("data-large_image",t.attr("href"))},700)}).on("reset_data",function(){d.default_gallery&&d.reset_data_count<1?d.reset_data_count++:(d.reset_data=!0,d.reset_data_count++,g(this).data("et_variation_gallery_default")&&u(g(this).data("et_variation_gallery_default")),c(),g(document).trigger("variable_product_found_variation"),d.default_gallery=!0)}),function(){var e=g(".main-images").data("Swiper"),t=g(".thumbnails-list").data("Swiper");void 0!==e&&etTheme.swipers["swiper-"+index].slideTo(0),l?g(".thumbnails-list").slick("slickGoTo",0):void 0!==t&&etTheme.swipers["swiper-"+index].slideTo(0)});function u(i){if(i&&o){var a=i.map(function(e){return wp.template("et-variation-gallery-thumbnail-template")(e)}).join("");g(".thumbnails-list").parent().removeClass("dt-hide mob-hide"),g(".swiper-control-top").find(".swiper-custom-left, .swiper-custom-right").removeClass("dt-hide mob-hide"),g(".thumbnails-list.vertical-thumbnails").find(".slick-arrow").remove();let e=!0;m&&((r=g(".swiper-wrapper.thumbnails-list, .thumbnails-list.vertical-thumbnails .slick-track").find(".video-thumbnail")).length&&(e=!1),g(".swiper-wrapper.thumbnails-list, .thumbnails-list.vertical-thumbnails .slick-track").find(".thumbnail-item:has(img, picture)").remove(),"last"==etConfig.woocommerceSettings.product_video_position?r.first().before(a):r.last().after(a)),e&&g(".swiper-wrapper.thumbnails-list, .thumbnails-list.vertical-thumbnails .slick-track").html(a),i.length<=1&&(g(".swiper-wrapper.thumbnails-list").parent().addClass("dt-hide mob-hide"),g(".swiper-control-top").find(".swiper-custom-left, .swiper-custom-right").addClass("dt-hide mob-hide"));var r=i.map(function(e){return wp.template("et-variation-gallery-slider-template")(e)}).join("");let t=!0;m&&((a=g(".swiper-control-top .main-images").find("video, iframe")).length&&(t=!1),g(".swiper-control-top .main-images").find(".images:has(.woocommerce-main-image), .swiper-slide:has(.woocommerce-main-image)").remove(),"last"==etConfig.woocommerceSettings.product_video_position?a.first().parent().before(r):a.last().parent().after(r)),t&&g(".swiper-control-top .main-images").html(r),etTheme.global_image_lazy(),etTheme.resizeVideo(),setTimeout(function(){l&&(g(".thumbnails-list.vertical-thumbnails .slick-arrow").remove(),g(".thumbnails-list.vertical-thumbnails").slick("reinit"),g(".pswp-main-image img").on("load",function(){g(".thumbnails-list.vertical-thumbnails").slick("reinit")})),g(window).trigger("resize")},500),g.fn.zoom&&!s.length&&wc_single_product_params.zoom_enabled&&g(".woocommerce-product-gallery__image").each(function(e,t){var i=g(t).width(),a=g(t).find("img");g(t).trigger("zoom.destroy"),a.data("large_image_width")>i&&(a=g.extend({touch:!1},wc_single_product_params.zoom_options),"ontouchstart"in document.documentElement?a.on="click":g(t).zoom(a))})}}function _(e,t){var i,a,r;1==t.variation_gallery_images.length&&e.data("et_variation_gallery_default")&&1<=e.data("et_variation_gallery_default").length?e.data("et_variation_gallery_default")[0].url==t.variation_gallery_images[0].url?u(e.data("et_variation_gallery_default")):(e=g(document).find(".swiper-control-top .main-images .swiper-slide").first().find("a"),i=g(document).find(".thumbnails-list .thumbnail-item").first().find("a"),t.image.url&&(i&&i.attr("href",t.image.url),e)&&e.attr("href",t.image.url),t.image.src&&(i&&i.find("img").attr("src",t.image.src),e)&&(e.find("img").attr("src",t.image.src),t.image.full_src&&e.parent().find("img.zoomImg").attr("src",t.image.full_src),g.fn.zoom)&&!s.length&&wc_single_product_params.zoom_enabled&&(e.parent().trigger("zoom.destroy"),r=e.find("img"),a=g(e).parent().width(),r.data("large_image_width")>a)&&(r=g.extend({touch:!1},wc_single_product_params.zoom_options),"ontouchstart"in document.documentElement?r.on="click":g(e).parent().zoom(r)),t.image.srcset&&(i&&i.find("img").attr("srcset",t.image.srcset),e)&&e.find("img").attr("srcset",t.image.srcset)):u(t.variation_gallery_images),c(),g(document).trigger("variable_product_found_variation")}}}(jQuery);