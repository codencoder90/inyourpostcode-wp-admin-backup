(()=>{var e,t,r={324:(e,t,r)=>{"use strict";r.d(t,{D4:()=>n,Re:()=>a,Sh:()=>l,Vm:()=>o,g7:()=>c,nu:()=>s,rh:()=>i,xL:()=>u});const a=e=>{let t=e;return"string"==typeof t?t:(t=e?.type,"string"==typeof t?t:(t=e?.dataset?.type,"string"==typeof t?t:(t=e?.element?.dataset?.type,"string"==typeof t?t:null)))},n=(e,t)=>{const r=a(e);return Array.isArray(t)?t.includes(r):"string"==typeof t&&r===t},o=e=>n(e,["checkbox","image_buttons","text_labels"]),i=e=>n(e,["radio","color_swatches"]),s=e=>e?.element?.classList?.contains("wpo-field-hide"),l=e=>e.element.classList.contains("wpo-field-required")&&!s(e),c=e=>i(e)||"1"===e?.element?.dataset?.maxQty,u=e=>{switch(!0){case n(e,"textarea"):return"textarea";case n(e,"dropdown"):return"select";default:return"input"}}},551:(e,t,r)=>{"use strict";function a(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}r.d(t,{A:()=>a})},1127:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(9291),n=r(551);function o(e){(0,n.A)(1,arguments);var t=(0,a.A)(e);return t.setHours(0,0,0,0),t}},1810:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(1127),n=r(551);function o(e,t){(0,n.A)(2,arguments);var r=(0,a.A)(e),o=(0,a.A)(t);return r.getTime()===o.getTime()}},5104:(e,t,r)=>{"use strict";r.d(t,{Nh:()=>n,h0:()=>a,mT:()=>i,pu:()=>o});const a=e=>Object.fromEntries(Object.entries(e).map(([e,t])=>[e.toLowerCase(),t])),n=e=>({compare:(e,t,r=">")=>{switch(r){case"=":return e===t?1:0;case"!=":return e!==t?1:0;case"<":return e<t?1:0;case">=":return e>=t?1:0;case"<=":return e<=t?1:0;default:return e>t?1:0}},if:(e,t,r)=>e?t:r,and:(...e)=>e.every(e=>e),or:(...e)=>e.some(e=>e),not:e=>!e,eq:(e,t)=>e===t,neq:(e,t)=>e!==t,lt:(e,t)=>e<t,lte:(e,t)=>e<=t,gt:(e,t)=>e>t,gte:(e,t)=>e>=t}),o=e=>{var t;return{bulkPrice:(e,t,...r)=>{if(r.length%2!=0)throw new Error(__("bulkPrice() requires an even number of arguments after the product price and quantity","woocommerce-product-options"));const a=[];for(let e=0;e<r.length;e+=2)a.push({quantity:r[e],price:r[e+1]});a.sort((e,t)=>t.quantity-e.quantity);for(let e=0;e<a.length;e++)if(t>=a[e].quantity)return a[e].price;return e},bulkRate:(e,t,...r)=>{if(r.length%2!=0)throw new Error(__("bulkRate() requires an even number of arguments after the product price and quantity","woocommerce-product-options"));const a=[];for(let e=0;e<r.length;e+=2)a.push({quantity:r[e],rate:r[e+1]});a.sort((e,t)=>t.quantity-e.quantity);for(let r=0;r<a.length;r++)if(t>=a[r].quantity)return e*a[r].rate;return e},year:(e=null)=>(e=e||new Date,new Date(e).getFullYear()),month:(e=null)=>(e=e||new Date,new Date(e).getMonth()+1),day:(e=null)=>(e=e||new Date,new Date(e).getDate()),weekday:(e=null)=>(e=e||new Date,(7+new Date(e).getDay()-(window?.wpoSettings?.start_of_week||0))%7+1),productMeta:(t,r="")=>{var a,n;const o=e.querySelector(".wpo-totals-container")?.dataset,i=JSON.parse(null!==(a=o?.meta)&&void 0!==a?a:"[]"),s=Object.fromEntries(i.map(e=>[e.key,e.value]));return null!==(n=s?.[t])&&void 0!==n?n:r},...null!==(t=window?.wpoCustomFunctions)&&void 0!==t?t:{}}},i=()=>{var e;return{...null!==(e=window?.wpoCustomPriceTypes)&&void 0!==e?e:{}}}},5968:(e,t,r)=>{"use strict";r.d(t,{Tw:()=>u,Nl:()=>m,P4:()=>c,$8:()=>h,r9:()=>f});var a=r(324),n=r(5104);const o=window.wp.htmlEntities;var i=r(7723),s=r(9431),l=r.n(s);const c=e=>{var t,r,a,n,o,i,s,l,c;const u=e.querySelector(".wpo-totals-container")?.dataset,p=e.querySelector('button[name="add-to-cart"][type="submit"]'),d=null!==(t=e.querySelector('input[name="variation_id"][type="hidden"]')?.value)&&void 0!==t?t:0,m=p?.value?p.value:d,f=null!==e.querySelector("span.wcbvp_total_items"),h=parseInt(null!==(r=e.querySelector("span.wcbvp_total_items")?.textContent)&&void 0!==r?r:0),y=parseInt(null!==(a=e.querySelector("input.qty")?.value)&&void 0!==a?a:1);return{id:parseInt(m),price:parseFloat(null!==(n=u?.productPrice)&&void 0!==n?n:0),quantity:parseFloat(f?h:y),excludePrice:JSON.parse(null!==(o=u?.excludeProductPrice)&&void 0!==o?o:"false"),weight:null!==(i=u?.weight)&&void 0!==i?i:"",width:null!==(s=u?.width)&&void 0!==s?s:"",length:null!==(l=u?.length)&&void 0!==l?l:"",height:null!==(c=u?.height)&&void 0!==c?c:""}},u=(e,t,r,a={})=>{var o,i;const s=(0,n.mT)();let l=0;const u=e.element.closest("form"),m=c(u),f=null!==(o=a?.quantity)&&void 0!==o?o:m.quantity,h=null!==(i=a?.price)&&void 0!==i?i:m.price;switch(t){case"flat_fee":l=r;break;case"quantity_based":case"price_formula":l=r*f;break;case"percentage_inc":l=h*(r/100)*f;break;case"percentage_dec":l=r/100*-h*f;break;case"char_count":l=r*p(e)*f;break;case"file_count":l=r*d(e)*f;break;default:const n=s[t]?.callback;"function"==typeof n&&(l=n(e,t,h,r,a))}return l},p=e=>{let t;switch(e.type){case"text":t=e.element.querySelector("input");break;case"textarea":t=e.element.querySelector("textarea")}if(!t)return 0;let r=t.value?.trim?.();if(wpoSettings?.charCountRegExp?.length>0){const e=new RegExp(`[^${wpoSettings.charCountRegExp}]`,"g");r=r.replace(e,"")}return r?.length},d=e=>{const t=e.element.querySelector('input[type="hidden"]');try{return JSON.parse(t?.value)?.length}catch(e){return 0}},m=e=>{const t=[];if(e.element.classList.contains("wpo-field-hide"))return t;if((0,a.Vm)(e)&&Array.from(e.element.querySelectorAll('input[type="checkbox"]')).forEach(e=>{e.checked&&t.push({priceType:e.dataset.priceType,priceAmount:parseFloat(e.dataset.priceAmount)})}),(0,a.rh)(e)&&Array.from(e.element.querySelectorAll('input[type="radio"]')).forEach(e=>{e.checked&&t.push({priceType:e.dataset.priceType,priceAmount:parseFloat(e.dataset.priceAmount)})}),(0,a.D4)(e,"dropdown")){const r=e.element.querySelector("select");t.push({priceType:r.options[r.selectedIndex].dataset.priceType,priceAmount:parseFloat(r.options[r.selectedIndex].dataset.priceAmount)})}if((0,a.D4)(e,"number")){const r=e.element.querySelector("input");r.value?.trim?.()?.length>0&&t.push({priceType:r.dataset.priceType,priceAmount:parseFloat(r.dataset.priceAmount)})}if((0,a.D4)(e,["text","datepicker"])){const r=e.element.querySelector("input");("char_count"===r.dataset.priceType||"char_count"!==r.dataset.priceType&&r.value?.trim?.()?.length>0)&&t.push({priceType:r.dataset.priceType,priceAmount:parseFloat(r.dataset.priceAmount)})}if((0,a.D4)(e,"textarea")){const r=e.element.querySelector("textarea");("char_count"===r.dataset.priceType||"char_count"!==r.dataset.priceType&&r.value?.trim?.()?.length>0)&&t.push({priceType:r.dataset.priceType,priceAmount:parseFloat(r.dataset.priceAmount)})}if((0,a.D4)(e,"file_upload")){const r=e.element.querySelector(`input[name="wpo-option[option-${e.optionId}]"]`);JSON.parse(r.value).length>0&&t.push({priceType:r.dataset.priceType,priceAmount:parseFloat(r.dataset.priceAmount)})}if((0,a.D4)(e,"customer_price")){const r=e.element.querySelector("input"),a=isNaN(parseFloat(r.value))?0:parseFloat(r.value);t.push({priceType:"flat_fee",priceAmount:a})}return t},f=e=>y(wpoSettings.currency).formatAmount(e),h=()=>!!window.wpoSettings?.tax_conflicts,y=e=>{let t;const r=e=>{const t=e.replace(/<!--[\s\S]*?(-->|$)/g,"").replace(/<(script|style)[^>]*>[\s\S]*?(<\/\1>|$)/gi,"").replace(/<\/?[a-z][\s\S]*?(>|$)/gi,"");return t!==e?r(t):t},a=e=>{if(e.priceFormat)return r(e.priceFormat.toString());switch(e.symbolPosition){case"left":return"%1$s%2$s";case"right":return"%2$s%1$s";case"left_space":return"%1$s %2$s";case"right_space":return"%2$s %1$s"}return"%1$s%2$s"};return(e=>{const r={code:"USD",symbol:"$",symbolPosition:"left",thousandSeparator:",",decimalSeparator:".",precision:2,...e};let n=r.precision;null===n?(console.warn("Currency precision is null"),n=NaN):"string"==typeof n&&(n=parseInt(n,10)),t={code:r.code.toString(),symbol:(0,o.decodeEntities)(r.symbol.toString()),symbolPosition:r.symbolPosition.toString(),decimalSeparator:r.decimalSeparator.toString(),priceFormat:a(r),thousandSeparator:r.thousandSeparator.toString(),precision:n}})(e),{formatAmount:(e,r=!1)=>{const a=function({precision:e=null,decimalSeparator:t=".",thousandSeparator:r=","},a){if(void 0===a)return"";if("number"!=typeof a&&(a=parseFloat(a)),isNaN(a))return"";let n=null===e?NaN:Number(e);if(isNaN(n)){const[,e]=a.toString().split(".");n=e?e.length:0}return l()(a,n,t,r)}(t,e);if(""===a)return a;const{priceFormat:n,symbol:o,code:s}=t;return(0,i.sprintf)(n,r?s:o,a)}}}},6567:(e,t,r)=>{var a={"./attribute-options":[4513,856],"./attribute-options.js":[4513,856],"./custom-checkboxes":[6661,608],"./custom-checkboxes.js":[6661,608],"./date-picker":[8474,258],"./date-picker.js":[8474,258],"./dropdown":[1089,0],"./dropdown.js":[1089,0],"./file-upload":[6056,410],"./file-upload.js":[6056,410],"./image-buttons":[7591,50],"./image-buttons.js":[7591,50],"./image-switcher":[8071,846],"./image-switcher.js":[8071,846]};function n(e){if(!r.o(a,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],n=t[0];return r.e(t[1]).then(()=>r(n))}n.keys=()=>Object.keys(a),n.id=6567,e.exports=n},7723:e=>{"use strict";e.exports=window.wp.i18n},7813:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(9291),n=r(551);function o(e,t){(0,n.A)(2,arguments);var r=(0,a.A)(e),o=(0,a.A)(t);return r.getTime()<o.getTime()}},9291:(e,t,r)=>{"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}r.d(t,{A:()=>o});var n=r(551);function o(e){(0,n.A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===a(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},9431:e=>{"use strict";e.exports=function(e,t,r,a){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0,i=void 0===a?",":a,s=void 0===r?".":r,l="";return l=(o?function(e,t){if(-1===(""+e).indexOf("e"))return+(Math.round(e+"e+"+t)+"e-"+t);var r=(""+e).split("e"),a="";return+r[1]+t>0&&(a="+"),(+(Math.round(+r[0]+"e"+a+(+r[1]+t))+"e-"+t)).toFixed(t)}(n,o).toString():""+Math.round(n)).split("."),l[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(l[1]||"").length<o&&(l[1]=l[1]||"",l[1]+=new Array(o-l[1].length+1).join("0")),l.join(s)}},9672:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(9291),n=r(551);function o(e,t){(0,n.A)(2,arguments);var r=(0,a.A)(e),o=(0,a.A)(t);return r.getTime()>o.getTime()}}},a={};function n(e){var t=a[e];if(void 0!==t)return t.exports;var o=a[e]={exports:{}};return r[e](o,o.exports,n),o.exports}n.m=r,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"modules/"+{0:"dropdown",50:"image-buttons",258:"date-picker",410:"file-upload",608:"custom-checkboxes",846:"image-switcher",856:"attribute-options",982:"price-formulas"}[e]+".js?id="+{0:"a618f2bf057761ccd250",50:"85cbae93824f5b1d0dc9",258:"b25470fe606206f9b233",410:"6b1f7b789d2169dadf9a",608:"a19d940e11dcbc3e1592",846:"00fbb8aa87e8ef6d44cc",856:"09a23e0846dc588798cc",982:"7748400345705598f3ca"}[e],n.miniCssF=e=>{},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="woocommerce-product-options:",n.l=(r,a,o,i)=>{if(e[r])e[r].push(a);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var p=c[u];if(p.getAttribute("src")==r||p.getAttribute("data-webpack")==t+o){s=p;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[a];var d=(t,a)=>{s.onerror=s.onload=null,clearTimeout(m);var n=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach(e=>e(a)),t)return t(a)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=r[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={544:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((r,n)=>a=e[t]=[r,n]);r.push(a[2]=o);var i=n.p+n.u(t),s=new Error;n.l(i,r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,a[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,o,[i,s,l]=r,c=0;if(i.some(t=>0!==e[t])){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);l&&l(n)}for(t&&t(r);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=globalThis.webpackChunkwoocommerce_product_options=globalThis.webpackChunkwoocommerce_product_options||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(324),t=n(5968),r=n(9672),a=n(7813),o=n(1810);var i=n(7723);const s=(t,r=null)=>{var a;const n=window.jQuery,o=t,s=null!=r?r:o.querySelector("button.single_add_to_cart_button"),l=[],c=o.classList.contains("variations_form"),u=parseInt(null!==(a=o.querySelector('input[name="variation_id"][type="hidden"]')?.value)&&void 0!==a?a:0)>0&&!o.querySelector("button.single_add_to_cart_button")?.classList.contains("wc-variation-is-unavailable");let p=!c||u;const d=e=>{h()||e?.preventDefault?.()};function m(t,r=!0){const a=(t=>{var r;return null!==(r={checkbox:g,image_buttons:g,text_labels:g,radio:v,color_swatches:v,dropdown:w,text:f,number:f,customer_price:f,textarea:f,file_upload:b,datepicker:_,product:S}[(0,e.Re)(t)])&&void 0!==r?r:f})(t),n=t.inputElements.item(0);if(!n)return!0;if(r&&t.element.querySelector(".wpo-error-message")?.remove(),a(t))return n.required=!1,!0;if(r){const r=document.createElement("span");var o;r.classList.add("wpo-error-message"),(0,e.D4)(t,["datepicker","file_upload"])?r.textContent=null!==(o=n?.dataset?.validationMessage)&&void 0!==o?o:"":r.textContent=n.validationMessage,t.element.appendChild(r)}return!1}function f(t){const r=t.inputElements.item(0);return r.required=(0,e.Sh)(t),r?.checkValidity()}function h(t=!0){const r=l.reduce((r,a)=>{let n=!1;if((0,e.nu)(a)){const e=a.inputElements.item(0);e&&(e.required=!1,e.setCustomValidity("")),n=!0}else n=m(a,t);return r&&n},!0)&&p;!r&&t&&y();const a=new CustomEvent("wpo:formValidityCheck",{bubbles:!0,detail:{isValid:r}});return o.dispatchEvent(a),r}const y=()=>{const e=t.querySelector(".wpo-error-message"),r=e?.closest(".wpo-field");if(r){const e=45,t=document.body.getBoundingClientRect().top,a=r.getBoundingClientRect().top-t-e;window.scrollTo({top:a,behavior:"smooth"})}};function g(t,r){const a=Array.from(t.inputElements).filter(e=>e.checked),n=t.inputElements.item(0),o=(0,e.Sh)(t)?1:0,s=t.minQty?t.minQty:o,l=t.maxQty?t.maxQty:0;if(((0,e.Sh)(t)||a.length>0)&&s&&a.length<s){const e=(0,i.sprintf)(/* translators: %d: minimum number of required options */ /* translators: %d: minimum number of required options */
(0,i._n)("Please select at least %d option.","Please select at least %d options.",s,"woocommerce-product-options"),s);return n?.setCustomValidity(e),!1}if(((0,e.Sh)(t)||a.length>0)&&l&&a.length>l){const e=(0,i.sprintf)(/* translators: %d: maximum number of required options */ /* translators: %d: maximum number of required options */
(0,i._n)("Please select no more than %d option.","Please select no more than %d options.",t.maxQty,"woocommerce-product-options"),t.maxQty);return n?.setCustomValidity(e),!1}return 1===l&&a.length>l?(r&&t.inputElements.forEach(e=>{e.checked=e.value===r.value,e.closest(".wpo-image-button")?.querySelector(".wpo-image-active")?.classList.toggle("wpo-image-selected",e.checked)}),!1):(n?.setCustomValidity(""),!0)}function v(t){const r=Array.from(t.inputElements).filter(e=>e.checked),a=t.inputElements.item(0);return 0===r.length&&(0,e.Sh)(t)?(a?.setCustomValidity((0,i.__)("Please select an option.","woocommerce-product-options")),a.required=!0,!1):(a?.setCustomValidity(""),a.required=!1,!0)}function w(t){const r=t.inputElements.item(0);return 0===r.value.length&&(0,e.Sh)(t)?(r?.setCustomValidity((0,i.__)("Please select an option.","woocommerce-product-options")),r.required=!0,!1):(r?.setCustomValidity(""),r.required=!1,!0)}function b(t){const r=t.inputElements.item(0);return JSON.parse(r.value).length<1&&(0,e.Sh)(t)?(r.dataset.validationMessage=(0,i.__)("Please select a file.","woocommerce-product-options"),r.required=!0,!1):(delete r.dataset.validationMessage,r.valid=!0,r.required=!1,!0)}function _(t){const r=t.inputElements.item(0);return 0===r.value.length&&(0,e.Sh)(t)?(r.dataset.validationMessage=(0,i.__)("Please select a date.","woocommerce-product-options"),!1):(delete r.dataset.validationMessage,r.required=!1,!0)}function S(t,r){switch(!0){case(0,e.D4)(t,"radio"):return t.inputElements.forEach(e=>{e.checked=e.value===r.value}),v(t);case(0,e.D4)(t,"dropdown"):return w(t);case(0,e.D4)(t,"checkbox"):case(0,e.D4)(t,"image_buttons"):default:return g(t,r)}}return{init:function(){if(!(o instanceof HTMLFormElement&&s instanceof HTMLButtonElement))return!1;l.push(...Array.from(o.querySelectorAll(".wpo-field")).map(t=>{var r,a,n,o;const i=t.querySelectorAll((0,e.xL)(t.dataset.type)),s=i.item(0),l=s?.min?parseInt(s?.min):null,c=s?.max?parseInt(s?.max):null;return{element:t,inputElements:i,optionId:parseInt(null!==(r=t?.dataset?.optionId)&&void 0!==r?r:0),minQty:t.dataset?.minQty?parseInt(t.dataset.minQty):l,maxQty:t.dataset?.maxQty?parseInt(t.dataset.maxQty):c,step:null!==(a=s?.step)&&void 0!==a?a:null,minChar:null!==(n=s?.minLength)&&void 0!==n?n:null,maxChar:null!==(o=s?.maxLength)&&void 0!==o?o:null}}).filter(Boolean)),o.checkFormValidity=h,function(){l.forEach(e=>{["input","change"].forEach(t=>{e.element.addEventListener(t,()=>{((e,t)=>{const r=new CustomEvent(`wpo:field:${e}`,{bubbles:!0,detail:{field:t}});o.dispatchEvent(r)})(t,e),m(e),s.classList.toggle("disabled",!h(!1))})}),e.inputElements.forEach(e=>{e.addEventListener("invalid",e=>e.preventDefault())})}),l.filter(e=>"product"===e?.element?.dataset?.parentType&&"radio"===e?.element?.dataset?.type).forEach(e=>{e.inputElements.forEach(t=>{t.addEventListener("change",()=>{e.inputElements.forEach(e=>{e.checked=e.value===t.value})})})}),s.addEventListener("click",e=>{d(e)}),o.addEventListener("submit",e=>{d(e)}),n(o).on("wc_variation_form",(e,t)=>{n(o).on("show_variation",(e,t,r)=>{p=r,s.classList.toggle("disabled",!h(!1))}),n(o).on("reset_data",()=>{p=!1})}),n(o).on("found_variation",(e,t)=>{var r;p=null!==(r=t?.is_purchasable)&&void 0!==r&&r});const e=!h(!1);if(e){const e=new CustomEvent("wpo:invalidForm",{bubbles:!0,detail:{form:o}});o.dispatchEvent(e)}s.classList.toggle("disabled",e)}()}}},l=window.wp.apiFetch;var c=n.n(l);const u=(r,a=!1)=>{const o=r;let i,s,l=[],u=[],p=[],d=[],m=[];const f=e=>{e=e||o,i=(0,t.P4)(o),m=[],l.forEach(e=>{(0,t.Nl)(e).forEach(t=>{g(e,t.priceAmount,t.priceType)})}),u.length>0?h().then(()=>{v()}):v()},h=()=>new Promise(e=>{n.e(982).then(n.bind(n,3412)).then(r=>{const a=u.map(e=>{const t=r.evaluateFormula(e);return t?.field&&t?.price&&g(t.field,t.price,"price_formula"),t});(0,t.$8)()?i?.id>0&&y({product_id:i.id,formulas:a}).then(()=>e()).catch(e=>reject(e)):e()})}),y=e=>new Promise(t=>{s.querySelector(".wpo-price").innerHTML="",c()({path:"/wc-product-options/v1/formula/calculate",method:"POST",data:e}).then(e=>{e.forEach(e=>{const t=u.find(t=>t.optionId===e.option_id);isNaN(e.price)||g(t,e.price,"price_formula")}),s.classList.remove("wpo-totals-hidden"),t()}).catch(e=>{reject(e)})}),g=(r,a,n)=>{const o=(0,t.Tw)(r,n,a);(0,e.g7)(r)&&(m=m.filter(e=>e.field!==r.optionId)),m.push({field:r.optionId,price:o}),r.element.dataset.optionPrice=o,r.element.value=o},v=()=>{const e=m.reduce((e,t)=>e+t.price,0),t=i.excludePrice?e:i.quantity*i.price+e;o.dispatchEvent(new CustomEvent("wpo:recalculated",{detail:{form:o,total:s?.dataset?.totalPrice}})),w(Math.max(0,t),e)},w=(e,r)=>{const n=(0,t.r9)(e);0===r&&1===i.quantity?s.classList.add("wpo-totals-hidden"):s.classList.remove("wpo-totals-hidden"),s.querySelector(".wpo-price")&&(s.querySelector(".wpo-price").innerHTML=n);const l=e/i.quantity;s.dataset.totalPrice=parseFloat(e),s.dataset.perItemPrice=parseFloat(l),"wro"===a&&window.wcRestaurantProductModal&&window.wcRestaurantProductModal.setPrice(l),o.dispatchEvent(new CustomEvent("wpo:priceUpdated",{detail:{form:o,total:s.dataset.totalPrice}}))};return{init:()=>o instanceof HTMLFormElement&&o.querySelector(".wpo-totals-container")instanceof HTMLElement&&(i=(0,t.P4)(o),s=o.querySelector(".wpo-totals-container"),l=Array.from(o.querySelectorAll(".wpo-field")).map(e=>({element:e,type:e.dataset?.type,groupId:e.dataset?.groupId?parseInt(e.dataset.groupId):null,optionId:e.dataset?.optionId?parseInt(e.dataset.optionId):null,pricing:"true"===e.dataset?.pricing})),u=Array.from(o.querySelectorAll(".wpo-field")).filter(e=>"price_formula"===e.dataset.type).map(e=>{const t=e.querySelector("input");return{element:e,inputElement:e.querySelector("input"),type:e.dataset?.type,groupId:e.dataset?.groupId?parseInt(e.dataset.groupId):null,optionId:e.dataset?.optionId?parseInt(e.dataset.optionId):null,formula:t.dataset?.priceFormula?t.dataset.priceFormula:null,formulaVariables:t.dataset?.priceFormulaVariables?JSON.parse(t.dataset.priceFormulaVariables):null,customFormulaVariables:t.dataset?.customFormulaVariables?JSON.parse(t.dataset.customFormulaVariables):null}}),p=Array.from(o.querySelectorAll(".wpo-field")).filter(e=>"number"===e.dataset.type).map(e=>({element:e,inputElement:e.querySelector("input"),type:e.dataset?.type,groupId:e.dataset?.groupId?parseInt(e.dataset.groupId):null,optionId:e.dataset?.optionId?parseInt(e.dataset.optionId):null})),d=Array.from(o.querySelectorAll(".wpo-field")).filter(e=>"checkbox"===e.dataset.type).map(e=>({element:e,inputElements:e.querySelectorAll("input"),type:e.dataset?.type,groupId:e.dataset?.groupId?parseInt(e.dataset.groupId):null,optionId:e.dataset?.optionId?parseInt(e.dataset.optionId):null})),(()=>{if(o.querySelector("input.qty")?.addEventListener("change",e=>{f()}),jQuery("input.qty").on("change",()=>{f()}),jQuery(document).on("wc_bulk_variations_table_recalculate",()=>{f()}),"wro"===a&&window.wcRestaurantProductModal){const e=window.wcRestaurantProductModal.getModalElement();e.on("wro:modal:change_quantity",t=>{f(e.get(0).querySelector("form.cart"))})}o.addEventListener("wpo_run_frontend_calculation",()=>f()),o.addEventListener("wpo:recalculate",()=>f()),l.forEach(t=>{(0,e.D4)(t,["text","textarea","customer_price","number"])?t?.element.addEventListener("input",()=>f()):t?.element.addEventListener("change",()=>f())}),jQuery(document).on("found_variation",o,(e,r)=>{o===e.target&&(s.dataset.productPrice=r.display_price,s.dataset.weight=r.weight,s.dataset.width=r.dimensions.width,s.dataset.length=r.dimensions.length,s.dataset.height=r.dimensions.height,i=(0,t.P4)(o),f())}),jQuery(document).on("reset_data",o,e=>{f()})})(),void f())}},p=r=>{const a=r;let o=(0,t.P4)(a),i=[],s=[],l=[],c=0;const u=()=>{i.forEach(e=>{e.subTotals=[]}),s.forEach(e=>{(0,t.Nl)(e).forEach(t=>{m(e,t.priceAmount,t.priceType)})}),p().then(()=>{f()})},p=()=>new Promise(e=>{n.e(982).then(n.bind(n,3412)).then(r=>{const a=l.map(e=>{const t=r.evaluateFormula(e);return t?.field&&t?.price&&m(t.field,t.price,"price_formula"),t});(0,t.$8)()?o?.id>0&&d({product_id:o.id,formulas:a}).then(()=>e()).catch(e=>reject(e)):e()})}),d=e=>new Promise(t=>{totalsContainer.querySelector(".wpo-price").innerHTML="",apiFetch({path:"/wc-product-options/v1/formula/calculate",method:"POST",data:e}).then(e=>{e.forEach(e=>{const t=l.find(t=>t.optionId===e.option_id);isNaN(e.price)||m(t,e.price,"price_formula")}),totalsContainer.classList.remove("wpo-totals-hidden"),t()}).catch(e=>{reject(e)})}),m=(e,r,a)=>{for(const[n,o]of i.entries()){if(!o?.quantity||0===o.quantity)continue;const s=(0,t.Tw)(e,a,r,{price:o.display_price,quantity:o.quantity});o.subTotals=o.subTotals.filter(t=>t.field!==e.optionId),o.subTotals.push({field:e.optionId,price:s}),i[n].subTotals=subTotals}},f=()=>{c=i.reduce((e,t)=>{if(!t?.subTotals||!Array.isArray(t.subTotals))return e;if(!t?.quantity||0===t.quantity)return e;const r=t.subTotals.reduce((e,t)=>e+t.price,0);return e+(o.excludePrice?r:t.quantity*t.display_price+r)},0),h((0,t.r9)(c))},h=e=>{a.querySelector(".wcbvp_total_price bdi").innerHTML=e};return{init:()=>a instanceof HTMLFormElement&&a.querySelector(".wpo-totals-container")instanceof HTMLElement&&(i=JSON.parse(a.dataset?.product_variations),s=Array.from(a.querySelectorAll(".wpo-field")).map(e=>({element:e,type:e.dataset?.type,groupId:e.dataset?.groupId?parseInt(e.dataset.groupId):null,optionId:e.dataset?.optionId?parseInt(e.dataset.optionId):null,pricing:"true"===e.dataset?.pricing})).filter(e=>e.pricing),l=Array.from(a.querySelectorAll(".wpo-field")).filter(e=>"price_formula"===e.dataset.type).map(e=>{const t=e.querySelector("input");return{element:e,inputElement:e.querySelector("input"),type:e.dataset?.type,groupId:e.dataset?.groupId?parseInt(e.dataset.groupId):null,optionId:e.dataset?.optionId?parseInt(e.dataset.optionId):null,formula:t.dataset?.priceFormula?t.dataset.priceFormula:null,formulaVariables:t.dataset?.priceFormulaVariables?JSON.parse(t.dataset.priceFormulaVariables):null,customFormulaVariables:t.dataset?.customFormulaVariables?JSON.parse(t.dataset.customFormulaVariables):null}}),document.querySelectorAll("input.wcbvp-quantity").forEach(e=>{e.addEventListener("change",e=>{const t=parseInt(e.target.dataset.product_id),r=i[i.findIndex(e=>e.variation_id===t)];r&&(r.quantity=parseInt(e.target.value)),u()})}),s.forEach(t=>{(0,e.D4)(t,["text","textarea","customer_price"])?t?.element.addEventListener("input",()=>u()):t?.element.addEventListener("change",()=>u())}),jQuery(document).on("wc_bulk_variations_table_recalculate",()=>u()),void u())}};jQuery,n.p=window?.wpoSettings?.module_path_url,document.addEventListener("DOMContentLoaded",function(){((e="")=>new Promise((t,r)=>{const a=[],o={};return Object.entries({checkbox:{type:"checkbox",file:"custom-checkboxes"},textLabels:{type:"text_labels",file:"custom-checkboxes"},dropdown:{type:"dropdown",file:"dropdown"},fileUpload:{type:"file_upload",file:"file-upload"},imageButtons:{type:"images",file:"image-buttons"},imageSwitcher:{file:"image-switcher",selector:".wpo-field-with-images"},datePicker:{type:"datepicker",file:"date-picker"},attributeOptions:{type:"attribute_options",file:"attribute-options",selector:"[data-variation-attribute]"}}).forEach(([t,r])=>{const i=r.type?`[data-type="${r.type}"]`:"";let s=`${e} ${i}`;r.selector&&(s=`${e} ${r.selector}`),document.querySelectorAll(s).length>0&&a.push(n(6567)(`./${r.file}`).then(e=>{o[t]=e.default}))}),Promise.all(a).then(e=>{t(o)}).catch(e=>{r(e)})}))().then(n=>{((n,i=null)=>{(i=i||document.querySelectorAll("form.cart")).forEach(i=>{(function(n){const i=n,s=i?.dataset?.product_id,l=["variations_form","wpt_variations_form"];let c;const u=window.jQuery;let p=(0,t.P4)(i);function d(e,r){const a=e?.target,n=i.querySelector(".wpo-totals-container");n&&(n.dataset.productPrice=parseFloat(r.display_price||0),n.dataset.weight=parseFloat(r.weight||0),n.dataset.width=parseFloat(r.width||0),n.dataset.length=parseFloat(r.length||0),n.dataset.height=parseFloat(r.height||0),p=(0,t.P4)(a)),m()}function m(){c.filter(e=>e.clogic&&e.clogicConditions).forEach(t=>{!function(t){const n=function(){const t=[],r=c.filter(e=>!e.element.classList.contains("wpo-field-hide"));return r.forEach(r=>{const{optionId:a}=r,n=function(t){let r=!1;(0,e.Vm)(t)&&(r=t.element.querySelectorAll('input[type="checkbox"]')),(0,e.rh)(t)&&(r=t.element.querySelectorAll('input[type="radio"]')),(0,e.D4)(t,"dropdown")&&(r=t.element.querySelector("select")),(0,e.D4)(t,["text","datepicker","file_upload","customer_price","number"])&&(r=t.element.querySelector("input")),(0,e.D4)(t,"textarea")&&(r=t.element.querySelector("textarea"));let a=[];return"file_upload"===t.type?a=JSON.parse(r.value):(r=r instanceof NodeList?Array.from(r):[r],a=r.map(r=>(0,e.Vm)(t)||(0,e.rh)(t)?r.checked?r.value:"":r.value)),a.filter(Boolean)}(r);t.push({optionId:a,values:[...n]})}),t}();n.push(...function(){let e=Array.from(i.querySelectorAll(".variations select"));e=e.map(e=>{const t=new RegExp(`_${s}$`,"g");return{optionId:e.id.replace(t,""),values:[e.value]}}).filter(e=>""!==e.values[0]);const t=i.querySelector(".wpo-options-container")?.dataset?.productAttributes;let r=Object.entries(JSON.parse(null!=t?t:"{}"));return r=r.map(e=>({optionId:e[0],values:e[1]})),[...e,...r]}()),n.push(...Object.keys(p).map(e=>({optionId:`product_${e}`,values:[p[e]]})));const l="or"===t.clogicRelation?"some":"every";t.clogicConditions[l](e=>function(e,t){const n=e.find(e=>String(e.optionId)===String(t.optionID));if(!n)return!1;if(1===n.values.length)switch(t.operator){case"contains":case"equals":return"any"===t.value||n.values[0]===t.value;case"not_contains":case"not_equals":return"any"!==t.value&&n.values[0]!==t.value;case"greater":return parseFloat(n.values[0])>parseFloat(t.value);case"less":return parseFloat(n.values[0])<parseFloat(t.value);case"not_empty":return n.values[0].length>0;case"empty":return 0===n.values[0].length;case"date_greater":return(0,r.A)(new Date(n.values[0]),new Date(t.value));case"date_less":return(0,a.A)(new Date(n.values[0]),new Date(t.value));case"date_equals":return(0,o.A)(new Date(n.values[0]),new Date(t.value));case"date_not_equals":return!(0,o.A)(new Date(n.values[0]),new Date(t.value))}else switch(t.operator){case"contains":case"equals":return"any"===t.value&&n.values.length>0||n.values.includes(t.value);case"not_contains":case"not_equals":return"any"===t.value?0===n.values.length:!n.values.includes(t.value);case"empty":return 0===n.values.length;case"not_empty":return n.values.length>0}return!1}(n,e))?f(t,!0):f(t,!1)}(t)})}function f(e,t){t?("show"===e.clogicVisibility&&e.element.classList.remove("wpo-field-hide"),"hide"===e.clogicVisibility&&e.element.classList.add("wpo-field-hide")):("show"===e.clogicVisibility&&e.element.classList.add("wpo-field-hide"),"hide"===e.clogicVisibility&&e.element.classList.remove("wpo-field-hide")),i.dispatchEvent(new Event("wpo_run_frontend_calculation"))}return{init:function(){if(!(i instanceof HTMLFormElement))return!1;c=Array.from(i.querySelectorAll(".wpo-field")).map(t=>{var r,a;return{element:t,inputElements:t.querySelectorAll((0,e.xL)(t.dataset.type)),type:t.dataset?.type,groupId:t.dataset?.groupId?parseInt(t.dataset.groupId):null,optionId:t.dataset?.optionId?parseInt(t.dataset.optionId):null,clogic:"true"===t.dataset.clogic,clogicRelation:null!==(r=t.dataset?.clogicRelation)&&void 0!==r&&r,clogicVisibility:null!==(a=t.dataset?.clogicVisibility)&&void 0!==a&&a,clogicConditions:!!t.dataset?.clogicConditions&&JSON.parse(t.dataset.clogicConditions)}}),c.forEach(e=>e?.element.addEventListener("change",m)),l.some(e=>i.classList.contains(e))&&(u(i).on("woocommerce_variation_select_change",m),u(i).on("reset_variations",m),u(i).on("found_variation",d)),m()}}})(i).init(),s(i).init(),n?.fileUpload?.(i).init(),n?.imageButtons?.(i).init(),i.classList.contains("wcbvp-cart")?p(i).init():(u(i).init(),n?.attributeOptions?.(i).init())}),n?.dropdown?.init(),n?.checkbox?.init(),n?.textLabels?.init(),n?.datePicker?.init(),n?.imageSwitcher?.init()})(n)}).catch(e=>{console.error(e)})})})()})();