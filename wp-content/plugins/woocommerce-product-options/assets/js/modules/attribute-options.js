(globalThis.webpackChunkwoocommerce_product_options=globalThis.webpackChunkwoocommerce_product_options||[]).push([[856],{1038:e=>{var t;self,t=()=>(()=>{"use strict";var e={d:(t,i)=>{for(var o in i)e.o(i,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function i(e){const t=new MouseEvent("click",{bubbles:!0,cancelable:!1});e.dispatchEvent(t)}function o(e){const t=new Event("change",{bubbles:!0,cancelable:!1});e.dispatchEvent(t)}function n(e){const t=new FocusEvent("focusin",{bubbles:!0,cancelable:!1});e.dispatchEvent(t)}function s(e){const t=new FocusEvent("focusout",{bubbles:!0,cancelable:!1});e.dispatchEvent(t)}function l(e){const t=new UIEvent("modalclose",{bubbles:!0,cancelable:!1});e.dispatchEvent(t)}function r(e,t){"invalid"==t?(c(this.dropdown,"invalid"),u(this.dropdown,"valid")):(c(this.dropdown,"valid"),u(this.dropdown,"invalid"))}function a(e,t){return null!=e[t]?e[t]:e.getAttribute(t)}function d(e,t){return!!e&&e.classList.contains(t)}function c(e,t){if(e)return e.classList.add(t)}function u(e,t){if(e)return e.classList.remove(t)}e.r(t),e.d(t,{bind:()=>f,default:()=>h});var p={data:null,searchable:!1,showSelectedItems:!1};function h(e,t){this.el=e,this.config=Object.assign({},p,t||{}),this.data=this.config.data,this.selectedOptions=[],this.placeholder=a(this.el,"placeholder")||this.config.placeholder||"Select an option",this.searchtext=a(this.el,"searchtext")||this.config.searchtext||"Search",this.selectedtext=a(this.el,"selectedtext")||this.config.selectedtext||"selected",this.dropdown=null,this.multiple=a(this.el,"multiple"),this.disabled=a(this.el,"disabled"),this.create()}function f(e,t){return new h(e,t)}return h.prototype.create=function(){this.el.style.opacity="0",this.el.style.width="0",this.el.style.padding="0",this.el.style.height="0",this.el.style.fontSize="0",this.data?this.processData(this.data):this.extractData(),this.renderDropdown(),this.bindEvent()},h.prototype.processData=function(e){var t=[];e.forEach(e=>{t.push({data:e,attributes:{selected:!!e.selected,disabled:!!e.disabled,optgroup:"optgroup"==e.value}})}),this.options=t},h.prototype.extractData=function(){var e=this.el.querySelectorAll("option,optgroup"),t=[],i=[],o=[];e.forEach(e=>{if("OPTGROUP"==e.tagName)var o={text:e.label,value:"optgroup"};else{let t=e.innerText;null!=e.dataset.display&&(t=e.dataset.display),o={text:t,value:e.value,extra:e.dataset.extra,selected:null!=e.getAttribute("selected"),disabled:null!=e.getAttribute("disabled")}}var n={selected:null!=e.getAttribute("selected"),disabled:null!=e.getAttribute("disabled"),optgroup:"OPTGROUP"==e.tagName};t.push(o),i.push({data:o,attributes:n})}),this.data=t,this.options=i,this.options.forEach(e=>{e.attributes.selected&&o.push(e)}),this.selectedOptions=o},h.prototype.renderDropdown=function(){var e=["nice-select",a(this.el,"class")||"",this.disabled?"disabled":"",this.multiple?"has-multiple":""];let t='<div class="nice-select-search-box">';t+=`<input type="text" class="nice-select-search" placeholder="${this.searchtext}..." title="search"/>`,t+="</div>";var i=`<div class="${e.join(" ")}" tabindex="${this.disabled?null:0}">`;i+=`<span class="${this.multiple?"multiple-options":"current"}"></span>`,i+='<div class="nice-select-dropdown">',i+=`${this.config.searchable?t:""}`,i+='<ul class="list"></ul>',i+="</div>",i+="</div>",this.el.insertAdjacentHTML("afterend",i),this.dropdown=this.el.nextElementSibling,this._renderSelectedItems(),this._renderItems()},h.prototype._renderSelectedItems=function(){if(this.multiple){var e="";this.config.showSelectedItems||this.config.showSelectedItems||"auto"==window.getComputedStyle(this.dropdown).width||this.selectedOptions.length<2?(this.selectedOptions.forEach(function(t){e+=`<span class="current">${t.data.text}</span>`}),e=""==e?this.placeholder:e):e=this.selectedOptions.length+" "+this.selectedtext,this.dropdown.querySelector(".multiple-options").innerHTML=e}else{var t=this.selectedOptions.length>0?this.selectedOptions[0].data.text:this.placeholder;this.dropdown.querySelector(".current").innerHTML=t}},h.prototype._renderItems=function(){var e=this.dropdown.querySelector("ul");this.options.forEach(t=>{e.appendChild(this._renderItem(t))})},h.prototype._renderItem=function(e){var t=document.createElement("li");if(t.innerHTML=e.data.text,null!=e.data.extra&&t.appendChild(this._renderItemExtra(e.data.extra)),e.attributes.optgroup)c(t,"optgroup");else{t.setAttribute("data-value",e.data.value);var i=["option",e.attributes.selected?"selected":null,e.attributes.disabled?"disabled":null];t.addEventListener("click",this._onItemClicked.bind(this,e)),t.classList.add(...i)}return e.element=t,t},h.prototype._renderItemExtra=function(e){var t=document.createElement("span");return t.innerHTML=e,c(t,"extra"),t},h.prototype.update=function(){if(this.extractData(),this.dropdown){var e=d(this.dropdown,"open");this.dropdown.parentNode.removeChild(this.dropdown),this.create(),e&&i(this.dropdown)}a(this.el,"disabled")?this.disable():this.enable()},h.prototype.disable=function(){this.disabled||(this.disabled=!0,c(this.dropdown,"disabled"))},h.prototype.enable=function(){this.disabled&&(this.disabled=!1,u(this.dropdown,"disabled"))},h.prototype.clear=function(){this.resetSelectValue(),this.selectedOptions=[],this._renderSelectedItems(),this.update(),o(this.el)},h.prototype.destroy=function(){this.dropdown&&(this.dropdown.parentNode.removeChild(this.dropdown),this.el.style.display="")},h.prototype.bindEvent=function(){this.dropdown.addEventListener("click",this._onClicked.bind(this)),this.dropdown.addEventListener("keydown",this._onKeyPressed.bind(this)),this.dropdown.addEventListener("focusin",n.bind(this,this.el)),this.dropdown.addEventListener("focusout",s.bind(this,this.el)),this.el.addEventListener("invalid",r.bind(this,this.el,"invalid")),window.addEventListener("click",this._onClickedOutside.bind(this)),this.config.searchable&&this._bindSearchEvent()},h.prototype._bindSearchEvent=function(){var e=this.dropdown.querySelector(".nice-select-search");e&&e.addEventListener("click",function(e){return e.stopPropagation(),!1}),e.addEventListener("input",this._onSearchChanged.bind(this))},h.prototype._onClicked=function(e){if(e.preventDefault(),d(this.dropdown,"open")?this.multiple?e.target==this.dropdown.querySelector(".multiple-options")&&(u(this.dropdown,"open"),l(this.el)):(u(this.dropdown,"open"),l(this.el)):(c(this.dropdown,"open"),function(e){const t=new UIEvent("modalopen",{bubbles:!0,cancelable:!1});e.dispatchEvent(t)}(this.el)),d(this.dropdown,"open")){var t=this.dropdown.querySelector(".nice-select-search");t&&(t.value="",t.focus());var i=this.dropdown.querySelector(".focus");u(i,"focus"),c(i=this.dropdown.querySelector(".selected"),"focus"),this.dropdown.querySelectorAll("ul li").forEach(function(e){e.style.display=""})}else this.dropdown.focus()},h.prototype._onItemClicked=function(e,t){var i=t.target;if(!d(i,"disabled")){if(this.multiple)if(d(i,"selected")){u(i,"selected"),this.selectedOptions.splice(this.selectedOptions.indexOf(e),1);var o=this.el.querySelector(`option[value="${i.dataset.value}"]`);o.removeAttribute("selected"),o.selected=!1}else c(i,"selected"),this.selectedOptions.push(e);else this.options.forEach(function(e){u(e.element,"selected")}),this.selectedOptions.forEach(function(e){u(e.element,"selected")}),c(i,"selected"),this.selectedOptions=[e];this._renderSelectedItems(),this.updateSelectValue()}},h.prototype.setValue=function(e){var t,i=this.el,o=!0;if(i.multiple)for(var n=0;n<e.length;n++)e[n]=String(e[n]);for(var s of i.options)t=i.multiple?e.indexOf(s.value)>-1?s.value:null:e,s.value!=t||s.disabled?(s.removeAttribute("selected"),delete s.selected):(o&&(i.value=t,o=!1),s.setAttribute("selected",!0),s.selected=!0);o&&!i.multiple&&(i.options[0].setAttribute("selected",!0),i.options[0].selected=!0,i.value=i.options[0].value),this.update()},h.prototype.getValue=function(){var e=this.el;if(!e.multiple)return e.value;var t=[];for(var i of e.options)i.selected&&t.push(i.value);return t},h.prototype.updateSelectValue=function(){if(this.multiple){var e=this.el;this.selectedOptions.forEach(function(t){var i=e.querySelector(`option[value="${t.data.value}"]`);i?i.setAttribute("selected",!0):console.error("Option not found, does it have a value?")})}else this.selectedOptions.length>0&&(this.el.value=this.selectedOptions[0].data.value);o(this.el)},h.prototype.resetSelectValue=function(){if(this.multiple){var e=this.el;this.selectedOptions.forEach(function(t){var i=e.querySelector(`option[value="${t.data.value}"]`);i&&(i.removeAttribute("selected"),delete i.selected)})}else this.selectedOptions.length>0&&(this.el.selectedIndex=-1);o(this.el)},h.prototype._onClickedOutside=function(e){this.dropdown.contains(e.target)||(u(this.dropdown,"open"),l(this.el))},h.prototype._onKeyPressed=function(e){var t=this.dropdown.querySelector(".focus"),o=d(this.dropdown,"open");if(13==e.keyCode)i(o?t:this.dropdown);else if(40==e.keyCode){if(o){var n=this._findNext(t);n&&(u(this.dropdown.querySelector(".focus"),"focus"),c(n,"focus"))}else i(this.dropdown);e.preventDefault()}else if(38==e.keyCode){if(o){var s=this._findPrev(t);s&&(u(this.dropdown.querySelector(".focus"),"focus"),c(s,"focus"))}else i(this.dropdown);e.preventDefault()}else if(27==e.keyCode&&o)i(this.dropdown);else if(32===e.keyCode&&o)return!1;return!1},h.prototype._findNext=function(e){for(e=e?e.nextElementSibling:this.dropdown.querySelector(".list .option");e;){if(!d(e,"disabled")&&"none"!=e.style.display)return e;e=e.nextElementSibling}return null},h.prototype._findPrev=function(e){for(e=e?e.previousElementSibling:this.dropdown.querySelector(".list .option:last-child");e;){if(!d(e,"disabled")&&"none"!=e.style.display)return e;e=e.previousElementSibling}return null},h.prototype._onSearchChanged=function(e){var t=d(this.dropdown,"open"),i=e.target.value;if(""==(i=i.toLowerCase()))this.options.forEach(function(e){e.element.style.display=""});else if(t){var o=new RegExp(i);this.options.forEach(function(e){var t=e.data.text.toLowerCase(),i=o.test(t);e.element.style.display=i?"":"none"})}this.dropdown.querySelectorAll(".focus").forEach(function(e){u(e,"focus")}),c(this._findNext(null),"focus")},t})(),e.exports=t()},4513:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var o=i(7723),n=i(1038),s=i.n(n),l=i(324);const r=function(e){const t=e,i=window.jQuery;let n,r;function a(){let e=!1;n.forEach(t=>{t.inputElements.forEach(i=>{(0,l.Vm)(t.type)||(0,l.rh)(t.type)?i.checked&&(e=!0,d({target:i},t)):"dropdown"===t.type&&i.value&&(e=!0,d({target:i},t))})}),e&&i(t).find(".variations select").trigger("change.wc-variation-form")}function d(e,o){let n;var s,l;if(n="dropdown"===o.type?null!==(s=e.target.options[e.target.selectedIndex].dataset.attributeTerm)&&void 0!==s?s:null:null!==(l=e.target.dataset.attributeTerm)&&void 0!==l?l:null,null===n)return;const r=t.querySelector(`select[name="attribute_${o.variationAttribute}"]`);null!==r&&(r.value=n,i(r).trigger("change"))}function c(){n.forEach(e=>{e.inputElements.forEach(t=>{(0,l.Vm)(e.type)||(0,l.rh)(e.type)?t.checked=!1:"dropdown"===e.type&&(t.multiple=!0,t.value="",h(t),t.multiple=!1)})})}function u(){const e=r.map(e=>t.querySelector(`select[name="attribute_${e}"]`)),i=Object.fromEntries(r.map((t,i)=>{const o=e?.[i];return[t,Array.from(o.options).filter(e=>!e.disabled&&e.value).map(e=>e.value)]}));n.forEach(e=>{var t;const o=null!==(t=i[e.variationAttribute])&&void 0!==t?t:[];o.length&&(("dropdown"===e.type?Array.from(e.inputElements[0].options):e.inputElements).forEach(t=>{o.includes(t.dataset.attributeTerm)?function(e,t){if(e.disabled=!1,(0,l.Vm)(t)||(0,l.rh)(t)){const i=e.closest(f(t));i?.classList?.remove("wpo-field-hide")}}(t,e):function(e,t){if((0,l.Vm)(t)||(0,l.rh)(t)){const i=e.closest(f(t));i?.classList?.add("wpo-field-hide"),e.disabled=!0,e.checked=!1}"dropdown"===t.type&&e.value&&(e.disabled=!0,e.selected=!1)}(t,e)}),"dropdown"===e.type&&h(e.inputElements[0]))})}function p(){const e=document.querySelector(".reset_variations").closest("table"),i=t.querySelectorAll(".variations select"),o=Array.from(i).some(e=>""!==e.value);e.style.display=o?"table":"none"}function h(e){var t;e._niceSelect||(e._niceSelect=new(s())(e,{placeholder:(0,o.__)("Select an option","woocommerce-product-options")}),e.classList.add("initialized"));const i=e._niceSelect,n=[e.value].filter(Boolean);e.multiple=!0,e.value=null!==(t=n[0])&&void 0!==t?t:"",i.setValue(n),i.update(),e.multiple=!1}function f(e){return{checkbox:".wpo-checkbox",radio:".wpo-radio",image_buttons:".wpo-image-button",text_labels:".wpo-text-label",color_swatches:".wpo-color-checkbox"}?.[e.type]}return{init:function(){return t instanceof HTMLFormElement&&!!["variations_form","wpt_variations_form"].some(e=>t.classList.contains(e))&&(n=Array.from(t.querySelectorAll(".wpo-field")).map(e=>({element:e,inputElements:e.querySelectorAll((0,l.xL)(e.dataset.type)),type:e.dataset?.type,variationAttribute:e.dataset?.variationAttribute})).filter(e=>e.variationAttribute),r=n.map(e=>e.variationAttribute),0!==n.length&&(n.forEach(e=>{e?.element.addEventListener("change",t=>d(t,e))}),t.querySelector(".reset_variations")?.addEventListener("click",c),i(t).on("woocommerce_update_variation_values",u),i(t).on("check_variations",p),a(),void function(){const e=new URL(window.location.href);r?.forEach(t=>{const i=e.searchParams.get(`attribute_${t}`);if(!i)return;const o=n.find(e=>e.variationAttribute===t);if(o)if((0,l.Vm)(o.type)||(0,l.rh)(o.type))o.inputElements.forEach(e=>{e.checked=e.dataset.attributeTerm===i});else if("dropdown"===o.type){const e=o.inputElements[0],t=Array.from(e.options).find(e=>e.dataset.attributeTerm===i);t&&(e.value=t.value)}}),a()}()))}}}}}]);